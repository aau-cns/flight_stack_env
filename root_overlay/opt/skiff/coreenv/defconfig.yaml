containers:
  core:
    startAfterCreate: true
    image: mascheiber/flightstack:arm64_bionic
    tty: true
    restartPolicy: "always"
    # If this is commented, then the container will use the DNS info from root on container start
    #dns:
    #  - "8.8.8.8"
    #  - "8.8.4.4"
    disableInit: true
    workingDirectory: /home/core
    mounts:
      - /dev:/dev
      - /sys:/sys
      - /lib/modules:/lib/modules
      - /mnt:/mnt
      - /run/udev:/run/udev
      - /mnt/persist/core:/home/core
      - /etc/resolv.conf:/etc/resolv.conf:ro
    privileged: true
    capAdd:
      - ALL
    hostIPC: true
    hostUTS: true
    hostNetwork: true
    securityOpt:
      - seccomp=unconfined
users:
  core:
    container: core
    containerUser: core
    containerShell:
      - "/bin/bash"
    auth:
      copyRootKeys: true
images:
  mascheiber/flightstack:arm64_bionic:
    # pull:
    #   policy: ifnotexists
    #   registry:
    build:
      source: /mnt/rootfs/coreenv/flightstack
      squash: true
